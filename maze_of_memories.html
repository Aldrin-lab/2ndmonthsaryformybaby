<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>Maze of Memories ‚Äì Happy 2nd Monthsary üíñ</title>
<style>
  :root{
    --pink:#ff7eb3;
    --pink2:#ffa3c4;
    --rose:#ff4f81;
    --lav:#c6b6ff;
    --bg1:#ffe3ec;
    --bg2:#ffd6e7;
    --text:#6b174a;
  }
  html,body{
    margin:0; padding:0; height:100%;
    font-family: "Poppins", system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
    color:var(--text);
    background: radial-gradient(1200px 800px at 20% 10%, var(--bg1), var(--bg2));
    overflow-x:hidden;
  }
  header{
    padding:16px 20px;
    display:flex; align-items:center; justify-content:space-between;
  }
  .brand{
    font-weight:800; letter-spacing:.5px;
  }
  .hud{
    display:flex; gap:12px; align-items:center;
    background:#ffffffaa; padding:8px 12px; border-radius:999px;
    box-shadow:0 4px 18px rgba(0,0,0,.08);
  }
  .chip{ display:flex; align-items:center; gap:8px; padding:6px 10px; border-radius:999px; background:white; box-shadow:inset 0 0 0 1px #00000010;}
  .heart{font-size:18px}
  .map{
    max-width:1100px; margin:10px auto 0; padding:0 16px 80px;
  }
  .path{
    position:relative; margin: 24px auto; max-width:960px;
    display:grid; grid-template-columns:repeat(6,1fr); gap:12px;
  }
  .node{
    background:white; border-radius:18px; padding:14px; text-align:center;
    box-shadow:0 10px 25px rgba(0,0,0,.08);
    border:2px solid transparent;
    position:relative;
    transition: transform .2s ease, border-color .2s ease, box-shadow .2s ease, opacity .3s ease;
    opacity:.5;
  }
  .node.active{ border-color: var(--rose); opacity:1; transform:translateY(-4px); }
  .node.locked{ opacity:.35; filter:grayscale(.3); }
  .node .lvl{ font-size:12px; opacity:.7; }
  .node .emoji{ font-size:20px; }
  .node .title{ font-size:14px; font-weight:700; margin-top:4px;}
  .node::after{
    content:""; position:absolute; top:50%; right:-6px; width:12px; height:3px; background:linear-gradient(90deg, var(--pink), var(--rose));
  }
  .node:last-child::after{ display:none; }
  .legend{
    text-align:center; margin-top:8px; font-size:14px; opacity:.8;
  }
  .panel{
    max-width:820px; margin: 12px auto; background:white; border-radius:24px; padding:20px;
    box-shadow:0 15px 35px rgba(0,0,0,.10);
  }
  .intro{
    text-align:center;
  }
  h1{
    margin:10px 0 4px; font-size:28px;
    text-shadow:0 2px 0 #ffffff80;
  }
  .sub{opacity:.85}
  .btn{
    appearance:none; border:none; border-radius:999px; padding:12px 20px; font-weight:700;
    background: linear-gradient(90deg, var(--pink), var(--rose));
    color:white; box-shadow:0 10px 24px rgba(255,79,129,.35);
    cursor:pointer; transition: transform .1s ease;
  }
  .btn:active{ transform: translateY(1px) scale(.995); }
  .question{
    margin-top:6px;
  }
  .q-title{ font-weight:800; font-size:18px; margin-bottom:8px; }
  .options{ display:flex; flex-wrap:wrap; gap:10px; }
  .opt{
    padding:10px 12px; border-radius:12px; border:2px solid #00000012; cursor:pointer;
    background:#fff8fb;
  }
  .opt input{ display:none; }
  .opt.correct{ border-color:#35c759; background:#eaffef; }
  .opt.wrong{ border-color:#ff3b30; background:#fff0f0; }
  .field{ padding:10px 12px; border-radius:12px; border:2px solid #00000012; width:100%; }
  .controls{ display:flex; gap:10px; margin-top:12px; flex-wrap:wrap; }
  .tiny{ font-size:12px; opacity:.8 }
  .floating-heart{
    position:fixed; bottom:-20px; font-size:18px; animation:floatUp 3s ease-in forwards; pointer-events:none;
  }
  @keyframes floatUp{
    0%{ transform: translateY(0) translateX(0) scale(.9); opacity:.9; }
    100%{ transform: translateY(-110vh) translateX(50px) scale(1.3); opacity:0; }
  }
  .shake{ animation: shake .4s linear; }
  @keyframes shake{
    0%,100%{ transform: translateX(0); }
    25%{ transform: translateX(-6px); }
    50%{ transform: translateX(6px); }
    75%{ transform: translateX(-6px); }
  }
  .success{
    text-align:center; padding:16px;
  }
  .big{
    font-size:28px; font-weight:900; margin:6px 0 2px;
    background: linear-gradient(90deg, var(--rose), var(--lav));
    -webkit-background-clip:text; background-clip:text; color:transparent;
  }
  .confetti-heart{
    position:fixed; left:50%; top:50%; font-size:22px; opacity:0;
    animation: pop 1.2s ease-out forwards;
  }
  @keyframes pop{
    0%{ transform: translate(-50%,-50%) scale(.2); opacity:0; }
    30%{ opacity:1; }
    100%{ transform: translate(calc(-50% + var(--dx)), calc(-50% + var(--dy))) scale(1.4); opacity:0; }
  }
  footer{
    text-align:center; padding:20px; color:#0000007a;
  }
  /* heart background */
  .bg-hearts{ position:fixed; inset:0; overflow:hidden; z-index:-1; }
  .bg-hearts span{
    position:absolute; bottom:-20px; color:#ff7eb3; opacity:.25; animation: rise var(--dur) linear infinite;
    font-size: var(--size);
    left: var(--x);
  }
  @keyframes rise{
    to{ transform: translateY(-110vh); opacity:0; }
  }
</style>
</head>
<body>

<header>
  <div class="brand">Maze of Memories üíò</div>
  <div class="hud">
    <div class="chip"><span class="heart">‚ù§Ô∏è</span> <span id="hearts">0</span></div>
    <div class="chip">Level <span id="level">1</span>/ <span id="levels">4</span></div>
    <button id="musicBtn" class="btn" style="padding:8px 14px;">üîä Music</button>
  </div>
</header>

<div class="map">
  <div class="legend tiny">Follow the love path. Answer right to unlock the next step. Wrong answers send you back one checkpoint üòâ</div>
  <div class="path" id="path"></div>

  <div class="panel intro" id="panel">
    <h1>Happy 2nd Monthsary, Baby! üéâ</h1>
    <div class="sub">Welcome to our little game. Collect hearts, remember moments, and reach the surprise at the end. Ready?</div>
    <br/>
    <button id="startBtn" class="btn">Start the Maze ‚ûú</button>
    <div class="tiny" style="margin-top:8px;">Tip: You can edit questions inside the file (look for <b>QUESTIONS</b> in the code).</div>
  </div>
</div>

<div class="bg-hearts" id="bgHearts"></div>

<footer>Made with üíñ for us ‚Ä¢ 2nd Monthsary</footer>

<!-- Final screen template -->
<template id="finalScreen">
  <div class="panel success">
     <div class="big">You finished the Maze of Memories! üíû</div>
     <p>You collected <b><span id="finalHearts"></span> hearts</b>. Thank you for choosing me, remembering us, and loving me.</p>
     <p class="tiny">‚ÄúI love you to the moon and back ‚Äî today, tomorrow, and always.‚Äù</p>
     <button class="btn" onclick="location.reload()">Play again</button>
  </div>
</template>

<script>
/* =====================
   EDIT YOUR QUESTIONS HERE
   ===================== */
const QUESTIONS = [
  {
    theme: "Starting Point",
    icon: "üåü",
    type: "mcq",
    question: "What‚Äôs the name of the place where we first met online?",
    options: ["Facebook", "Instagram", "Tinder", "Discord"],
    answer: "Discord" // change to your correct answer
  },
  {
    theme: "Early Days",
    icon: "‚è∞",
    type: "mcq",
    question: "What time zone am I in?",
    options: ["GMT", "PST", "EST", "UTC+8"],
    answer: "UTC+8" // Philippines time
  },
  {
    theme: "Memories & Milestones",
    icon: "üé•",
    type: "text",
    question: "What was our first video call about?",
    placeholder: "Type a sweet memory here‚Ä¶",
    answer: "your smile" // set a forgiving keyword; answer is case-insensitive and checks inclusion
  },
  {
    theme: "Future Plans",
    icon: "‚úàÔ∏è",
    type: "text",
    question: "What‚Äôs the first country we want to visit together?",
    placeholder: "Our dream destination‚Ä¶",
    answer: "japan"
  },
  {
    theme: "Bonus Pathway",
    icon: "üíå",
    type: "mcq",
    question: "What was the first emoji I sent you after we started chatting?",
    options: ["‚ù§Ô∏è", "üòÇ", "üòò", "üíå"],
    answer: "‚ù§Ô∏è"
  }
];

// ========== Simple state ==========
let level = 0;           // index in QUESTIONS
let hearts = 0;
let nodes = [];
const TOTAL_LEVELS = QUESTIONS.length;

document.getElementById('levels').textContent = TOTAL_LEVELS;

// Build path nodes
const path = document.getElementById('path');
for(let i=0;i<TOTAL_LEVELS;i++){
  const n = document.createElement('div');
  n.className = 'node locked';
  n.innerHTML = `<div class="lvl">L${i+1}</div><div class="emoji">${QUESTIONS[i].icon}</div><div class="title">${QUESTIONS[i].theme}</div>`;
  path.appendChild(n);
  nodes.push(n);
}
activateNode(0);

// Start button
document.getElementById('startBtn').addEventListener('click', ()=>{
  showQuestion(level);
  tryStartMusic();
});

// Music setup (WebAudio tone loop so no external files)
let audioCtx, isPlaying=false, osc, gain;
function tryStartMusic(){
  if(isPlaying) return;
  audioCtx = new (window.AudioContext || window.webkitAudioContext)();
  gain = audioCtx.createGain();
  gain.gain.value = 0.03;
  gain.connect(audioCtx.destination);
  isPlaying = true;
  // Simple cute arpeggio loop
  const notes = [523.25, 659.25, 783.99, 659.25]; // C5 E5 G5 E5
  let i=0;
  setInterval(()=>{
    if(!isPlaying) return;
    if(osc) osc.stop();
    osc = audioCtx.createOscillator();
    osc.type = 'sine';
    osc.frequency.value = notes[i % notes.length];
    osc.connect(gain);
    osc.start();
    setTimeout(()=>{ if(osc) osc.stop(); }, 300);
    i++;
  }, 420);
}
// Music button
document.getElementById('musicBtn').addEventListener('click', ()=>{
  if(!audioCtx){
    tryStartMusic();
    return;
  }
  if(isPlaying){
    isPlaying=false; gain.gain.value = 0;
  }else{
    isPlaying=true; gain.gain.value = 0.03;
  }
});

function activateNode(i){
  nodes.forEach((n,idx)=>{
    n.classList.remove('active');
    n.classList.add('locked');
    if(idx<=i) n.classList.remove('locked');
  });
  nodes[i].classList.add('active');
  document.getElementById('level').textContent = i+1;
}

// Question rendering
function showQuestion(idx){
  const q = QUESTIONS[idx];
  const panel = document.getElementById('panel');
  panel.classList.remove('shake');
  panel.innerHTML = `
    <div class="question">
      <div class="q-title">${q.icon} <b>${q.theme}</b></div>
      <div style="font-size:18px; margin:6px 0 10px">${q.question}</div>
      <div id="qArea"></div>
      <div class="controls">
        <button class="btn" id="submitBtn">Submit</button>
        <button class="btn" style="background:linear-gradient(90deg,#bbb,#ddd); color:#333" id="hintBtn">Hint</button>
      </div>
      <div class="tiny" id="feedback"></div>
    </div>
  `;

  const qArea = panel.querySelector('#qArea');

  if(q.type === 'mcq'){
    const opts = document.createElement('div'); opts.className='options';
    q.options.forEach(opt=>{
      const label = document.createElement('label');
      label.className='opt';
      label.innerHTML = `<input type="radio" name="opt" value="${opt}"><span>${opt}</span>`;
      opts.appendChild(label);
      label.addEventListener('click', ()=>{
        panel.querySelectorAll('.opt').forEach(o=>o.classList.remove('correct','wrong'));
      });
    });
    qArea.appendChild(opts);
  } else if(q.type === 'text'){
    const input = document.createElement('input');
    input.className='field';
    input.placeholder = q.placeholder || 'Type your answer‚Ä¶';
    input.id='textAns';
    qArea.appendChild(input);
  }

  panel.querySelector('#submitBtn').addEventListener('click', ()=> checkAnswer(q, panel));
  panel.querySelector('#hintBtn').addEventListener('click', ()=>{
    const f = panel.querySelector('#feedback');
    f.textContent = "Follow your heart‚Ä¶ and our memories üíû";
  });
}

function checkAnswer(q, panel){
  let isCorrect=false, chosen=null;
  if(q.type==='mcq'){
    const input = panel.querySelector('input[name="opt"]:checked');
    if(!input){ wobble(panel); return; }
    chosen = input.value;
    isCorrect = (chosen === q.answer);
    // decorate
    panel.querySelectorAll('.opt').forEach(o=>{
      const val = o.querySelector('input').value;
      if(val === q.answer) o.classList.add('correct');
      if(val === chosen && val !== q.answer) o.classList.add('wrong');
    });
  }else if(q.type==='text'){
    const t = panel.querySelector('#textAns').value.trim().toLowerCase();
    if(!t){ wobble(panel); return; }
    isCorrect = t.includes((q.answer||'').toLowerCase());
  }

  if(isCorrect){
    reward();
    hearts++;
    document.getElementById('hearts').textContent = hearts;
    // advance
    level++;
    if(level < TOTAL_LEVELS){
      activateNode(level);
      setTimeout(()=>showQuestion(level), 600);
    }else{
      showFinal();
    }
  }else{
    // step back (but not below 0)
    level = Math.max(0, level-1);
    activateNode(level);
    punish(panel);
    setTimeout(()=>showQuestion(level), 700);
  }
}

function wobble(el){
  el.classList.remove('shake'); void el.offsetWidth; el.classList.add('shake');
}

function reward(){
  // burst hearts
  for(let i=0;i<8;i++){
    const h = document.createElement('div');
    h.className = 'confetti-heart';
    h.textContent = 'üíñ';
    h.style.setProperty('--dx', (Math.random()*260-130)+'px');
    h.style.setProperty('--dy', (Math.random()*220-110)+'px');
    document.body.appendChild(h);
    setTimeout(()=>h.remove(), 1300);
  }
  // floating background heart
  makeFloatingHeart();
}
function punish(panel){
  wobble(panel);
  const f = panel.querySelector('#feedback');
  if(f) f.textContent = "Oops! One step back. You've got this ‚Äî try again! üí™";
}

function makeFloatingHeart(){
  const h = document.createElement('span');
  h.className='floating-heart';
  h.textContent = Math.random()>.5?'‚ù§Ô∏è':'üíó';
  h.style.left = (Math.random()*90+5) + 'vw';
  document.body.appendChild(h);
  setTimeout(()=>h.remove(), 3000);
}

// Background hearts
const bg = document.getElementById('bgHearts');
for(let i=0;i<24;i++){
  const s = document.createElement('span');
  s.textContent = Math.random()>.5?'‚ù§':'‚ô°';
  s.style.setProperty('--dur', (6+Math.random()*10)+'s');
  s.style.setProperty('--size', (12+Math.random()*28)+'px');
  s.style.setProperty('--x', (Math.random()*100)+'%');
  s.style.opacity = 0.15 + Math.random()*0.25;
  bg.appendChild(s);
}

// Final screen
function showFinal(){
  document.querySelector('.map').innerHTML = '';
  const tpl = document.getElementById('finalScreen');
  const node = tpl.content.cloneNode(true);
  document.body.querySelector('footer').before(node);
  document.getElementById('finalHearts').textContent = hearts;

  // shower of hearts
  for(let i=0;i<60;i++){
    setTimeout(makeFloatingHeart, i*120);
  }

  // Big message
  const panel = document.querySelector('.panel.success');
  const msg = document.createElement('div');
  msg.innerHTML = `<div class="big">Happy 2nd Monthsary, Baby! ü•∞</div>
  <p>Thank you for being my favorite person. You‚Äôre my safe place, my smile, and my home. <b>I love you.</b></p>`;
  panel.appendChild(msg);
}
</script>
</body>
</html>
