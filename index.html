<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>Maze of Memories ‚Äì Happy 2nd Monthsary üíñ</title>
<style>
  :root{
    --pink:#ff7eb3;
    --rose:#ff4f81;
    --lav:#c6b6ff;
    --bg1:#ffe3ec;
    --bg2:#ffd6e7;
    --text:#6b174a;
    --ok:#35c759;
    --bad:#ff3b30;
  }
  html,body{
    margin:0; padding:0; height:100%;
    font-family: "Poppins", system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
    color:var(--text);
    background: radial-gradient(1200px 800px at 20% 10%, var(--bg1), var(--bg2));
    overflow-x:hidden;
  }
  header{
    padding:14px 16px;
    display:flex; align-items:center; justify-content:space-between; gap:8px; flex-wrap:wrap;
  }
  .brand{ font-weight:800; letter-spacing:.3px; }
  .hud{ display:flex; gap:8px; align-items:center; flex-wrap:wrap; }
  .chip{
    display:flex; align-items:center; gap:8px; padding:6px 10px; border-radius:999px; background:white;
    box-shadow:0 4px 18px rgba(0,0,0,.08);
    border:1px solid #00000010;
  }
  .btn{
    appearance:none; border:none; border-radius:999px; padding:10px 16px; font-weight:700;
    background: linear-gradient(90deg, var(--pink), var(--rose));
    color:white; box-shadow:0 10px 24px rgba(255,79,129,.35);
    cursor:pointer; transition: transform .1s ease;
  }
  .btn:active{ transform: translateY(1px) scale(.995); }
  .map{ max-width:980px; margin:4px auto 90px; padding:0 16px; }
  .legend{ text-align:center; font-size:14px; opacity:.8; }
  .path{
    display:grid; grid-template-columns: repeat(5, minmax(0,1fr)); gap:10px; margin:16px 0 6px;
  }
  .node{
    background:white; border-radius:18px; padding:10px; text-align:center;
    box-shadow:0 10px 25px rgba(0,0,0,.08); border:2px solid transparent; opacity:.5;
    transition: .2s ease; min-height:64px;
  }
  .node .lvl{ font-size:12px; opacity:.7; }
  .node .emoji{ font-size:18px; }
  .node .title{ font-size:13px; font-weight:700; margin-top:4px; white-space:nowrap; overflow:hidden; text-overflow:ellipsis; }
  .node.active{ border-color: var(--rose); opacity:1; transform:translateY(-3px); }
  .node.locked{ opacity:.35; filter:grayscale(.3); }
  .panel{
    max-width:820px; margin: 8px auto; background:white; border-radius:28px; padding:18px;
    box-shadow:0 15px 35px rgba(0,0,0,.10);
  }
  .intro{ text-align:center; }
  h1{ margin:8px 0 2px; font-size:26px; text-shadow:0 2px 0 #ffffff80; }
  .sub{opacity:.85}
  .heart-card{
    position:relative; margin:10px auto; max-width:640px; background:linear-gradient(145deg,#fff,#fff0f7);
    border-radius:28px; padding:18px 16px; box-shadow:0 18px 40px rgba(255,79,129,.15);
    animation: pop .35s ease both;
  }
  @keyframes pop{ from{ transform:scale(.95); opacity:0;} to{ transform:scale(1); opacity:1;} }
  .q-title{ font-weight:800; font-size:18px; margin-bottom:8px; display:flex; align-items:center; gap:8px;}
  .q-body{ font-size:17px; margin-bottom:8px; }
  .options{ display:flex; flex-direction:column; gap:8px; }
  .opt{
    padding:12px; border-radius:14px; border:2px solid #00000012; cursor:pointer; background:#fff8fb; display:flex; gap:10px; align-items:center;
  }
  .opt input{ display:none; }
  .opt.correct{ border-color:var(--ok); background:#eaffef; }
  .opt.wrong{ border-color:var(--bad); background:#fff0f0; }
  .field{ padding:12px; border-radius:14px; border:2px solid #00000012; width:100%; font-size:16px; }
  .controls{ display:flex; gap:10px; margin-top:12px; flex-wrap:wrap; }
  .hint{ font-size:12px; opacity:.7; margin-top:6px;}
  .tiny{ font-size:12px; opacity:.75 }
  .shake{ animation: shake .4s linear; }
  @keyframes shake{ 0%,100%{ transform: translateX(0);} 25%{ transform: translateX(-6px);} 50%{ transform: translateX(6px);} 75%{ transform: translateX(-6px);} }
  .sad{ font-size:36px; animation: wob 1s ease; }
  @keyframes wob{ 0%{ transform:scale(0.8); opacity:0;} 50%{ transform:scale(1.05); opacity:1;} 100%{ transform:scale(1); opacity:.8;} }
  footer{ text-align:center; padding:20px; color:#0000007a; }
  /* Floating BG hearts */
  .bg-hearts{ position:fixed; inset:0; overflow:hidden; z-index:-1; }
  .bg-hearts span{ position:absolute; bottom:-20px; color:#ff7eb3; opacity:.25; animation: rise var(--dur) linear infinite;
    font-size: var(--size); left: var(--x); }
  @keyframes rise{ to{ transform: translateY(-110vh); opacity:0;} }
  /* Final fireworks hearts */
  .confetti-heart{ position:fixed; left:50%; top:50%; font-size:22px; opacity:0; animation: pop2 1.2s ease-out forwards; }
  @keyframes pop2{ 0%{ transform: translate(-50%,-50%) scale(.2); opacity:0;} 30%{ opacity:1;} 100%{ transform: translate(calc(-50% + var(--dx)), calc(-50% + var(--dy))) scale(1.4); opacity:0;} }
  .final-title{ font-size:28px; font-weight:900; margin:8px 0 2px; background: linear-gradient(90deg, var(--rose), var(--lav));
    -webkit-background-clip:text; background-clip:text; color:transparent; }
</style>
</head>
<body>

<header>
  <div class="brand">Maze by your baby üíò</div>
  <div class="hud">
    <div class="chip">‚ù§Ô∏è <span id="hearts">0</span></div>
    <div class="chip">‚è±Ô∏è <span id="timer">00:00</span></div>
    <div class="chip">Level <span id="level">1</span>/<span id="levels">10</span></div>
    <button id="musicBtn" class="btn" style="padding:8px 14px;">üîä Music</button>
  </div>
</header>

<div class="map">
  <div class="legend tiny">Answer correctly to advance. Wrong answers send you back one step (except opinion questions). üíû</div>
  <div class="path" id="path"></div>

  <div class="panel intro" id="panel">
    <h1>Happy 2nd Monthsary, Baby! üéâ</h1>
    <div class="sub">Welcome to my Maze Baby. Collect hearts, remember us, and reach your surprise at the end. Ready?</div>
    <br/>
    <button id="startBtn" class="btn">Start the Maze ‚ûú</button>
    <div class="tiny" style="margin-top:8px;">You can play this on your phone or laptop. üíó</div>
  </div>
</div>

<div class="bg-hearts" id="bgHearts"></div>

<footer>Made by your baby 2nd Monthsary for usüíñ worked hard for 3hrs HEHE</footer>

<!-- Final screen template -->
<template id="finalScreen">
  <div class="panel">
     <div class="final-title">You finished the Maze of Memories! üíû</div>
     <p>Time: <b><span id="finalTime"></span></b> ‚Ä¢ Hearts collected: <b><span id="finalHearts"></span></b></p>
     <div id="recap" class="heart-card"></div>
     <p style="text-align:center;margin-top:8px;">Happy 2nd Monthsary Baby ‚ù§Ô∏è I Love You So Much ‚Äì <b>Aldrin</b></p>
     <div style="text-align:center;margin:10px 0;">
       <button class="btn" onclick="location.reload()">Play again</button>
     </div>
  </div>
</template>

<script>
/* =====================
   QUESTIONS (personalized)
   ===================== */
const QUESTIONS = [
  { theme:"Start", icon:"üåü", type:"mcq",
    q:"Where did we first meet?",
    options:["Discord","Rolbox","Facebook","Instagram"],
    answer:"Rolbox"
  },
  { theme:"Us", icon:"üíë", type:"mcq",
    q:"Who am I?",
    options:["Baby ko","Mahal ko","Asawa ko","All of the above"],
    answer:"All of the above"
  },
  { theme:"You & Me", icon:"üòò", type:"text",
    q:"What am I addicted to?",
    placeholder:"Type your answer‚Ä¶",
    answer:"kiss" // must include
  },
  { theme:"Hehe", icon:"üíå", type:"text",
    q:"Sino gusto mo?",
    placeholder:"Clue in the hint‚Ä¶",
    answer:"aldrin", // must include
    hint:"The one who created this üíï"
  },
  { theme:"Calls", icon:"üé•", type:"mcq",
    q:"What‚Äôs the first thing I do when we start a call?",
    options:["Flash a huge smile üòÅ","Hallo baby","üòò","üß∏"],
    answer:"Hallo baby"
  },
  { theme:"Hugs", icon:"ü´Ç", type:"opinion",
    q:"If I could send you one of my 'famous' virtual hugs, how would it look?",
    extra:"After you answer, please screenshot this and send it to me through Messenger üíå"
  },
  { theme:"Visit", icon:"‚úàÔ∏è", type:"opinion",
    q:"What‚Äôs the first thing you‚Äôll do when I finally get to visit you?",
    extra:"After you answer, please screenshot this and send it to me through Messenger üíå"
  },
  { theme:"Gift", icon:"üéÅ", type:"opinion",
    q:"If I had to send you a surprise gift, what would it most likely be?",
    extra:"After you answer, please screenshot this and send it to me through Messenger üíå"
  },
  { theme:"A Day", icon:"üåÖ", type:"opinion",
    q:"If we could spend an entire day together, how would we start it?",
    extra:"After you answer, please screenshot this and send it to me through Messenger üíå"
  },
  { theme:"First Place", icon:"üìç", type:"opinion",
    q:"When we finally get to be in the same place, where do you want to go first?",
    extra:"After you answer, please screenshot this and send it to me through Messenger üíå"
  }
];

// ======= STATE =======
let level = 0;
let hearts = 0;
let nodes = [];
const TOTAL = QUESTIONS.length;
let startTime = null, timerInterval = null;

document.getElementById('levels').textContent = TOTAL;

// Build nodes
const path = document.getElementById('path');
for(let i=0;i<TOTAL;i++){
  const n = document.createElement('div');
  n.className = 'node locked';
  n.innerHTML = `<div class="lvl">L${i+1}</div><div class="emoji">${QUESTIONS[i].icon}</div><div class="title">${QUESTIONS[i].theme}</div>`;
  path.appendChild(n);
  nodes.push(n);
}
activateNode(0);

// Start
document.getElementById('startBtn').addEventListener('click', ()=>{
  showQuestion(level);
  tryStartMusic();
  startTimer();
});

// Timer
function startTimer(){
  startTime = Date.now();
  const tEl = document.getElementById('timer');
  timerInterval = setInterval(()=>{
    const s = Math.floor((Date.now()-startTime)/1000);
    const mm = String(Math.floor(s/60)).padStart(2,'0');
    const ss = String(s%60).padStart(2,'0');
    tEl.textContent = `${mm}:${ss}`;
  }, 500);
}
function stopTimer(){
  if(timerInterval) clearInterval(timerInterval);
}

// Music (WebAudio arpeggio, offline)
let audioCtx, isPlaying=false, osc, gain;
function tryStartMusic(){
  if(isPlaying) return;
  audioCtx = new (window.AudioContext || window.webkitAudioContext)();
  gain = audioCtx.createGain();
  gain.gain.value = 0.035;
  gain.connect(audioCtx.destination);
  isPlaying = true;
  const notes = [523.25, 659.25, 783.99, 659.25, 587.33, 659.25]; // cute loop
  let i=0;
  setInterval(()=>{
    if(!isPlaying) return;
    if(osc) osc.stop();
    osc = audioCtx.createOscillator();
    osc.type = 'sine';
    osc.frequency.value = notes[i % notes.length];
    osc.connect(gain);
    osc.start();
    setTimeout(()=>{ if(osc) osc.stop(); }, 280);
    i++;
  }, 420);
}
document.getElementById('musicBtn').addEventListener('click', ()=>{
  if(!audioCtx){
    tryStartMusic();
    return;
  }
  if(isPlaying){
    isPlaying=false; gain.gain.value = 0;
  }else{
    isPlaying=true; gain.gain.value = 0.035;
  }
});

function activateNode(i){
  nodes.forEach((n,idx)=>{
    n.classList.remove('active'); n.classList.add('locked'); if(idx<=i) n.classList.remove('locked');
  });
  nodes[i].classList.add('active');
  document.getElementById('level').textContent = i+1;
}

// Render question
const panel = document.getElementById('panel');
const answers = []; // store user's answers
function showQuestion(idx){
  const data = QUESTIONS[idx];
  panel.className = 'panel';
  panel.innerHTML = `
    <div class="heart-card" id="card">
      <div class="q-title">${data.icon} <b>${data.theme}</b></div>
      <div class="q-body">${data.q}</div>
      <div id="qArea"></div>
      <div id="extra" class="hint"></div>
      <div class="controls">
        <button class="btn" id="submitBtn">Submit</button>
        ${data.hint ? '<button class="btn" style="background:linear-gradient(90deg,#bbb,#ddd); color:#333" id="hintBtn">Hint</button>' : ''}
      </div>
      <div class="tiny" id="feedback"></div>
    </div>
  `;

  const qArea = panel.querySelector('#qArea');

  if(data.type === 'mcq'){
    const opts = document.createElement('div'); opts.className='options';
    data.options.forEach(opt=>{
      const label = document.createElement('label');
      label.className='opt';
      label.innerHTML = `<input type="radio" name="opt" value="${opt}"><span>${opt}</span>`;
      opts.appendChild(label);
      label.addEventListener('click', ()=>{
        panel.querySelectorAll('.opt').forEach(o=>o.classList.remove('correct','wrong'));
      });
    });
    qArea.appendChild(opts);
  } else {
    // text or opinion
    const input = document.createElement('input');
    input.className='field';
    input.placeholder = data.placeholder || 'Type your answer‚Ä¶';
    input.id='textAns';
    qArea.appendChild(input);
    if(data.extra){
      document.getElementById('extra').textContent = data.extra;
    }
  }

  const submitBtn = panel.querySelector('#submitBtn');
  submitBtn.addEventListener('click', ()=>{
    checkAnswer(data);
  });

  if(data.hint){
    const hb = panel.querySelector('#hintBtn');
    hb && hb.addEventListener('click', ()=>{
      document.getElementById('feedback').textContent = data.hint;
    });
  }
}

function checkAnswer(q){
  let isCorrect=false, chosen=null, userText='';
  if(q.type==='mcq'){
    const input = panel.querySelector('input[name="opt"]:checked');
    if(!input){ wobble(panel); return; }
    chosen = input.value;
    isCorrect = (chosen === q.answer);
    // decorate
    panel.querySelectorAll('.opt').forEach(o=>{
      const val = o.querySelector('input').value;
      if(val === q.answer) o.classList.add('correct');
      if(val === chosen && val !== q.answer) o.classList.add('wrong');
    });
  } else if(q.type==='text'){
    const t = (panel.querySelector('#textAns').value || '').trim().toLowerCase();
    if(!t){ wobble(panel); return; }
    userText = t;
    isCorrect = t.includes((q.answer||'').toLowerCase());
  } else if(q.type==='opinion'){
    const t = (panel.querySelector('#textAns').value || '').trim();
    if(!t){ wobble(panel); return; }
    userText = t;
    // opinion always accepted
    isCorrect = true;
  }

  // Save answer for recap
  if(q.type==='mcq'){
    answers[level] = chosen || '';
  }else{
    answers[level] = userText || '';
  }

  if(isCorrect){
    reward();
    hearts++;
    document.getElementById('hearts').textContent = hearts;
    level++;
    if(level < TOTAL){
      activateNode(level);
      setTimeout(()=>showQuestion(level), 450);
    }else{
      finishGame();
    }
  }else{
    // wrong: fact-based only -> back one step, sad face
    punish();
    level = Math.max(0, level-1);
    activateNode(level);
    setTimeout(()=>showQuestion(level), 700);
  }
}

function wobble(el){ el.classList.remove('shake'); void el.offsetWidth; el.classList.add('shake'); }
function reward(){
  // small burst hearts
  for(let i=0;i<8;i++){
    const h = document.createElement('div');
    h.className = 'confetti-heart';
    h.textContent = Math.random()>.5?'üíñ':'üíó';
    h.style.setProperty('--dx', (Math.random()*260-130)+'px');
    h.style.setProperty('--dy', (Math.random()*220-110)+'px');
    document.body.appendChild(h);
    setTimeout(()=>h.remove(), 1200);
  }
  makeFloatingHeart();
}
function punish(){
  const card = document.getElementById('card');
  wobble(card);
  const f = panel.querySelector('#feedback');
  f.innerHTML = '<span class="sad">üò¢</span> Oops! Wrong answer. Going back one step ‚Äî try again, baby!';
}

function makeFloatingHeart(){
  const h = document.createElement('span');
  h.className='floating-heart';
  h.textContent = Math.random()>.5?'‚ù§Ô∏è':'üíó';
  h.style.left = (Math.random()*90+5) + 'vw';
  h.style.position='fixed';
  h.style.bottom='-20px';
  h.style.fontSize=(14+Math.random()*14)+'px';
  h.style.animation='floatUp 3s ease-in forwards';
  document.head.insertAdjacentHTML('beforeend', `<style>@keyframes floatUp{0%{transform:translateY(0) translateX(0) scale(.9);opacity:.9;}100%{transform:translateY(-110vh) translateX(50px) scale(1.3);opacity:0;}}</style>`);
  document.body.appendChild(h);
  setTimeout(()=>h.remove(), 3000);
}

// Background hearts
const bg = document.getElementById('bgHearts');
for(let i=0;i<24;i++){
  const s = document.createElement('span');
  s.textContent = Math.random()>.5?'‚ù§':'‚ô°';
  s.style.setProperty('--dur', (6+Math.random()*10)+'s');
  s.style.setProperty('--size', (12+Math.random()*28)+'px');
  s.style.setProperty('--x', (Math.random()*100)+'%');
  s.style.opacity = 0.15 + Math.random()*0.25;
  bg.appendChild(s);
}

// Finish
function finishGame(){
  stopTimer();
  document.querySelector('.map').innerHTML = '';
  const tpl = document.getElementById('finalScreen');
  const node = tpl.content.cloneNode(true);
  document.body.querySelector('footer').before(node);
  document.getElementById('finalHearts').textContent = hearts;
  const secs = Math.floor((Date.now()-startTime)/1000);
  const mm = String(Math.floor(secs/60)).padStart(2,'0');
  const ss = String(secs%60).padStart(2,'0');
  document.getElementById('finalTime').textContent = `${mm}:${ss}`;

  // Recap
  const recap = document.getElementById('recap');
  recap.innerHTML = '<div style="font-weight:800;margin-bottom:6px;">Memory Recap üìù</div>' + QUESTIONS.map((q,i)=>{
    const a = (answers[i] || '(no answer)').toString();
    return `<div style="margin:6px 0;"><b>Q${i+1}.</b> ${q.q}<br><span class="tiny">Answer: ${escapeHTML(a)}</span></div>`;
  }).join('');

  // heart shower
  for(let i=0;i<70;i++){ setTimeout(makeFloatingHeart, i*90); }
}

function escapeHTML(str){
  return str.replace(/&/g,'&amp;').replace(/</g,'&lt;').replace(/>/g,'&gt;');
}
</script>
</body>
</html>
"""

out_dir = Path("/mnt/data/maze_of_memories_v2")
out_dir.mkdir(parents=True, exist_ok=True)
index_path = out_dir / "index.html"
index_path.write_text(html, encoding="utf-8")

# Zip it
zip_path = Path("/mnt/data/maze_of_memories_v2.zip")
with zipfile.ZipFile(zip_path, "w", zipfile.ZIP_DEFLATED) as zf:
    zf.write(index_path, arcname="index.html")

str(zip_path)
